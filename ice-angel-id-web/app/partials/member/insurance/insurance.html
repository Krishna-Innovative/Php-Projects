<ng-form name="insuranceForm " novalidate>
    <div class="form-person-heading" ><span i18n="common.insuranceNumber" data-number="{{$index + 1}}"></span>
        <a ng-hide="viewMode" class="remove-btn" href="javascript:void(0);" ng-click="remove('insurances', 'insurances', $index);">
            <span class="glyphicon glyphicon-trash error-txt"></span>
        </a>
    </div>
    <div class="form-person-body additional_notes">
        <div class="form-group col-xs-12">
            <label ia-label required translation="common.category"></label>
            <div class="custom_select" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_type.$invalid}">
                <select class="form-control" name="insurance_type" ng-model="::insurance.insurance_type"
                        ng-options="type.id as type.name for type in results = (globals.settings.insurance_types.toArray() | optionsTrans:'name' | optionsSort:'name')" required>
                    <option class="hide" value="" i18n="common.selectInsuranceType"></option>
                </select>
            </div>
             <div ng-if="memberForm.$submitted  || insuranceForm.insurance_type.$touched" ng-messages="insuranceForm.insurance_type.$error" >
                 <div class="alert alert-danger" ng-message="required"><span i18n="common.requiredfield"></span></div>
            </div>
        </div>

        <div class="form-group col-xs-12" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_company.$invalid}">
            <label ia-label required message="tooltips.insuranceCompanyName" translation="common.companyName"></label>
            <input class="form-control"  type="text" name="insurance_company" data-i18n-attr="{placeholder: 'common.insuranceCompany'}"
                   ng-model="::insurance.company_name" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }" required >

            <div ng-if="memberForm.$submitted  || insuranceForm.insurance_company.$touched" ng-messages="insuranceForm.insurance_company.$error" >
                 <div class="alert alert-danger" ng-message="required"><span i18n="common.requiredfield"></span></div>
            </div>

        </div>

        <div class="form-group col-xs-12" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_number.$invalid}">
            <label ia-label translation="common.insuranceNumberMsg"></label>
            <input class="form-control" type="text" name="::insurance_number" data-i18n-attr="{placeholder: 'common.insuranceNumberMsg'}" ng-model="::insurance.number" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }">
        </div>

        <div class="form-group col-xs-12" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_plan_type.$invalid}">
            <label ia-label message="tooltips.insurancePlanName" translation="common.planType"></label>
            <input class="form-control" type="text" name="::insurance_plan_type" data-i18n-attr="{placeholder: 'common.insurancePlan'}"
                   ng-model="::insurance.plan_type" ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }">
        </div>

        <div class="form-group col-xs-12">
            <label ia-label required message="tooltips.insurancePhone" translation="common.telephone"></label>

            <div class="row">
                <div class="  col-xs-4 no-right-padding-cell">
                    <div class="custom_select" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_phone_code.$invalid}">
                        <select class="form-control" ng-init="insurance.company_phone.code = (insurance.company_phone.code != null && insurance.company_phone.code != '')? insurance.company_phone.code : IPCountryCode"  name="::insurance_phone_code" ng-model="insurance.company_phone.code" ng-options="item.id as (item.name + ' ' + item.phonecode) for item in results = (globals.settings.countries.toArray() | optionsTrans:'name' | optionsSort:'name')" required>
                            <option class="hide" value="" i18n="common.countryCode"></option>
                        </select>
                    </div>
                </div>
                <div class="col-xs-8 new-mobile-number-changes no-left-padding-cell" ng-class="{ 'has-error' : memberForm.$submitted && insuranceForm.insurance_phone_number.$invalid}">
                   <div class="col-xs-12 col-md-12 no-padding combine-contact-button phone-error">
                            <span type="tel"  class="form-control" ng-model="validateaccountnumber"   checkphone-code="insurance.company_phone.code"></span>
                    <input type="tel" class="form-control"
                           phone-number minlength="5" 
                           phonevarify-code="insurance.company_phone.code"
                           name="insurance_phone_number"
                           ng-disabled="!insurance.company_phone.code || viewMode"
                           ng-model="insurance.company_phone.number"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           data-i18n-attr="{placeholder: 'common.insurancePhoneNumber'}" required ng-keydown = "checkLength($event)"
                            ng-keypress="checkSpaceLength($event)"  >
                           </div>
                </div>
            </div>
            <div ng-if="memberForm.$submitted  || insuranceForm.insurance_phone_number.$touched" ng-messages="insuranceForm.insurance_phone_number.$error">
     <div class="alert alert-danger" ng-message="required"><span i18n="errors.phoneNumberRequired"></span></div>
     <div class="alert alert-danger" ng-message="phonenumber"><span i18n="errors.phoneFormat"></span></div>
     <div class="alert alert-danger" ng-message="minlength"><span i18n="errors.phoneNumberLength"></span></div>
</div>
        </div>

        <div class="form-group col-xs-12">
            <label ia-label translation="common.expiryDate"></label>
            <ia-date class="date" disabled="::viewMode" type="now-future" model="::insurance.expiry_date" form="memberForm" class="date"></ia-date>
        </div>

        <div notes-layout class="form-group col-xs-12" notes="insurance.notes"></div>

       <div class="form-input-delete col-xs-12">
        <label ia-label class="ia-label-text left-column-title" message="tooltips.covidupload" translation="common.attachment"></label>
      
              <div class="form-group">
                 
                  <div class="  box-upload">
      
                      <attachment file="insurance.document"></attachment>
      
                      <div class="col-xs-12 photo_upload_text_box">
                          <div class="upload_avatar">
                              <button class="btn btn-primary btn-lg btn-block btn-web" type="button">
                                  <span class="upload-btn" i18n="common.upload"></span>
                                   <i id="insurance" class="" style="font-size:18px"></i>
                              </button>
      
                              <ng-file size="2048"
                                       accept="{{fileuploadtype}}"
                                       ng-model="insurance.upload"
                                       model="insurance"
                                       name="document" ng-click="uploadFileFun('insurance');" >
                                       
                              </ng-file>
                          </div>
                      </div>
                  </div>
                    <!--  <div class="delete-input">
                        <a href="javascript:void(0);" ng-if="member.additional_information.records.living_will.document!==null && 
                        member.additional_information.records.living_will.document!==undefined" ng-click="resetStatus('living_will', 'records','document');" class="glyphicon glyphicon-trash error-txt"></a>
                    </div> -->
                  <div ng-messages="covid_reports.upload.$error">
                      <div class="alert alert-danger" ng-message="filesize"><span i18n="errors.fileSize"></span></div>
                  </div>
                  <!--<div ng-show="covidForm.document.$touched && !covid.document" class="ng-scope">
                    <div class="alert alert-danger" i18n="errors.uploadfield"></div>
                 </div>-->
               </div>
        </div>

    </div>
    <input type="hidden" ng-model="::insurance.id"/>
</ng-form>
